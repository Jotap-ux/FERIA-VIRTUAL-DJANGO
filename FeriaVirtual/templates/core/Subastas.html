{% extends "core/plantilla2.html" %}
{% load static %} 


{% block menu %}

    <a href="{% url 'TRANSP_DATOS' %}" class="nav-item nav-link text-light">Perfil</a>
    <a href="{% url 'SUBASTAS' %}" class="nav-item nav-link text-light">Subastas</a>
    
{% endblock menu %}

{% block contenido %}

    <!--CONTENIDO DEL LA PAGINA-->
    <div class="container-fluid mt-3">

        <!--TITULO SUBASTAS-->
        <div class="col-lg-12">
            <div class="p-10 mb-2 text-left">
                <h1 class="section-title position-relative text-uppercase mx-xl-5 mb-4 text-left fondo-fruta"><span class="bg-light text-left">Subastas Disponibles</span></h1>
            </div>
        </div>

         <!--SUBASTA 1-->  
        <div class="row px-xl-0">

            <!--IMAGEN-->
            <div class="col-lg-3 ">                                
                <div class="bg-light p-30 mb-3 border border-dark">
                    <div>
                        <img class="img-fluid w-100" src="{% static 'img/platano.jpg' %}" alt="">                        
                    </div>
                </div>
            </div>

             <!--ACA ESTA LA TABLA CON LOS DATOS DE LA SUBASTA--->
            <!----------------PRIMER DETALLE-------------------------------------->
            <div class="col-lg-6">
                <div class="bg-light mb-3 border border-dark">
                    <div class="border-bottom pb-2 separacion-detalles">
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>NÚMERO DE PEDIDO :</h6>
                            <h6>0001_0001</h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>CANTIDAD :</h6>
                            <h6>1000</h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>UNIDAD :</h6>
                            <h6>KG</h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>ÚLTIMO OFERTADO :</h6>
                            <h6>$ 10.990</h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>MI OFERTA :</h6>
                            <h6>$ 12.500</h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>FECHA LÍMITE :</h6>
                            <h6>07-09-2023</h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>TIEMPO RESTANTE :</h6>
                            <h6>12:59 (HRS:MIN)</h6>
                        </div>

                        <!--MENSAJES DE PREVIZUALIZACIÓN-->
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>ORIGEN :</h6>
                            <h6>
                                SANTIAGO
                                <a class="color-links custom-tooltip">
                                  DETALLE  <span class="tooltip-text"> ORIGEN: AV. PADRE ALBERTO HURTADO 277</span>                                    
                                </a>                                
                            </h6>
                        </div>
                        <div class="d-flex justify-content-between align-items-center info-div">
                            <h6>DESTINO :</h6>
                            <h6>
                                CONCEPCIÓN
                                <a class="color-links custom-tooltip">
                                  DETALLE  <span class="tooltip-text"> DESTINO: AV. LOS TOROS 7.200, SAN PEDRO DE LA PAZ</span>                                    
                                </a>                                
                            </h6>
                        </div>
                    </div>
                </div>
            </div>

            <!--CUADRO CON LOS BOTONES-->
            <div class="col-lg-3">                                
                <div class="bg-light p-30 mb-5 border border-dark">
                    <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4"><span class="bg-light pr-3">OFERTAR</span></h2>            
                    <!-------------------------->
                    <div class="col-md-12 form-group mb-3">                        
                        <input class="form-control" type="number" placeholder="$ 15.990">
                    </div>

                    <div class="col-md-12 form-group text-right">
                        <button type="button" class="btn btn-success btn-lg mb-3 w-100" data-bs-toggle="modal" data-bs-target="#modal-enviar-oferta">
                           Enviar Oferta
                        </button>
                        <button type="button" class="btn btn-danger btn-lg mb-1 w-100" data-bs-toggle="modal" data-bs-target="#modal-eliminar-oferta">
                            Eliminar Oferta
                         </button>
                    </div>

                </div>
            </div>

        </div>
    </div>
    <!------------------------------------->

    <!--MODAL PARA ENVIAR OFERTA EN UNA SUBASTA-->

    <div class="modal fade" id="modal-enviar-oferta" tabindex="-1" aria-labelledby="modal-formu-contactoLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content text-center">
                <div class="modal-header justify-content-center">
                    <h5 class="modal-title" id="modal-formu-contactoLabel">MENSAJE</h5>
                </div>
                <div class="modal-body">
                    Se ha enviado su oferta!
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-info" id="btnEnviar-oferta" data-bs-dismiss="modal" aria-label="Close">OK</button>
                </div>
            </div>
            
        </div>
    </div>

    <!-------------MODAL PARA PREGUNTAR SI DESEA ELIMINAR LA OFERTA EN ESA SUBASTA----------->
    <div class="modal fade" id="modal-eliminar-oferta" tabindex="-1" aria-labelledby="modal-avisoLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content text-center">
                <div class="modal-header justify-content-center">
                    <h5 class="modal-title" id="modal-avisoLabel">REGISTRO</h5>
                </div>
                <div class="modal-body">
                    ¿Está seguro que desea eliminar la oferta para esta subasta?
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-success" id="btnEliminar-oferSI" data-bs-target="#modal-aviso-inhabilitacion">Si</button>
                    <button type="button" class="btn btn-danger" id="btnEliminar-oferNO" data-bs-dismiss="modal" aria-label="Close">No</button>
                </div>
            </div>
        </div>
    </div>

    <!------------------MODAL PARA AVISAR QUE LA OFERTA FUE ELIMINADA DE ESA SUBASTA---------------------->
    <div class="modal fade" id="modal-aviso-OferEliminada" tabindex="-1" aria-labelledby="modal-avisoLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content text-center">
                <div class="modal-header justify-content-center">
                    <h5 class="modal-title" id="modal-avisoLabel">MENSAJE</h5>
                </div>
                <div class="modal-body">
                    Su oferta ha sido eliminada!
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-danger" id="btnOfertaEliminada" data-bs-dismiss="modal" aria-label="Close">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

{% endblock contenido %}

{% block script %}

    <!--Modal para recargar todo cuando se de en aceptar-->
    <script>
        document.getElementById("btnEnviar-oferta").addEventListener("click", function() {
            location.reload(); // Recargar la página cuando se hace clic en el botón "Aceptar"
        });
    </script>

    <!----------MODAL PARA AVISAR QUE LA OFERTA FUE ELIMINADA----->
    <script>
        document.getElementById('btnEliminar-oferSI').addEventListener('click', function () {
            $('#modal-aviso-OferEliminada').modal('show');
        });
    </script>
    <!----------------------MODAL PARA VOLVER SALIR Y VOLVER AL INDICE------------------------->
    <script>
        document.getElementById('btnOfertaEliminada').addEventListener('click', function () {
            window.location.href = '{% url 'SUBASTAS' %}'
        });
    </script>

{% endblock script %}